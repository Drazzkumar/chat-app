(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{35:function(e,t,a){e.exports=a(73)},40:function(e,t,a){},42:function(e,t,a){},71:function(e,t,a){},73:function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"logIn",function(){return O}),a.d(r,"signUp",function(){return j}),a.d(r,"getProfile",function(){return x});var n=a(0),o=a.n(n),s=a(29),c=a.n(s),l=(a(40),a(6)),m=a(7),i=a(10),u=a(8),d=a(11),p=(a(42),a(77)),h=a(74),f=a(12),w=a(14),b=a.n(w),v=a(17),E=a(18),g=a.n(E),N=function(){return localStorage.getItem("onpay-jwt")},y={headers:{Authorization:N()}},O=function(e,t){return function(){var a=Object(v.a)(b.a.mark(function a(r){var n;return b.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,g.a.post("/api/v1/users/login",e);case 3:(n=a.sent)&&n.data&&n.data.token?(t.push("/"),localStorage.setItem("onpay-jwt",n.data.token),window.location.reload()):(localStorage.removeItem("onpay-jwt"),t.push("/login/error")),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),a.t0&&(localStorage.removeItem("onpay-jwt"),t.push("/login/error"));case 10:case"end":return a.stop()}},a,this,[[0,7]])}));return function(e){return a.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(v.a)(b.a.mark(function t(a){var r,n,o,s,c,l,m,i;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(r={},e.delete("cpassword"),n=!0,o=!1,s=void 0,t.prev=5,c=e.entries()[Symbol.iterator]();!(n=(l=c.next()).done);n=!0)m=l.value,r[m[0]]=m[1];t.next=13;break;case 9:t.prev=9,t.t0=t.catch(5),o=!0,s=t.t0;case 13:t.prev=13,t.prev=14,n||null==c.return||c.return();case 16:if(t.prev=16,!o){t.next=19;break}throw s;case 19:return t.finish(16);case 20:return t.finish(13);case 21:return t.next=23,g.a.post("/api/v1/users/signup",r);case 23:(i=t.sent)&&"Created"===i.statusText?(window.history.pushState(null,null,"/login"),window.location.reload()):(window.history.pushState(null,null,"/register/error"),window.location.reload());case 25:case"end":return t.stop()}},t,this,[[5,9,13,21],[14,,16,20]])}));return function(e){return t.apply(this,arguments)}}()},x=function(){return function(){var e=Object(v.a)(b.a.mark(function e(t){var a,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get("/api/v1/users/profile",y);case 3:a=e.sent,r={type:"GET_PROFILE",payload:a.data},a&&a.data&&t(r),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),localStorage.removeItem("onpay-jwt"),window.location.reload();case 12:case"end":return e.stop()}},e,this,[[0,8]])}));return function(t){return e.apply(this,arguments)}}()},k=a(9),S=a(76),P=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={email:"",password:""},a.changeHandler=function(e){var t=e.target,r=t.name,n=t.value;a.setState(Object(f.a)({},r,n))},a.submitHandler=function(){var e=a.state,t=e.email,r=e.password;a.props.logIn({email:t,password:r},a.props.history),a.setState({email:"",password:""})},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){N()&&this.props.history.push("/"),this.props.match.params.error&&this.setState({email:"",password:""})}},{key:"render",value:function(){var e=this.props.match.params.error;return o.a.createElement("div",{className:"container mt-5"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"jumbotron col-sm-12 col-md-6 offset-md-3 col-lg-4 offset-lg-4"},e&&o.a.createElement("div",{className:"alert-danger"},"Email or password not matched!!"),o.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"email"},"Email address"),o.a.createElement("input",{type:"email",className:"form-control",id:"email",name:"email",placeholder:"Enter email",onChange:this.changeHandler,required:!0})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"password"},"Password"),o.a.createElement("input",{type:"password",className:"form-control",id:"password",name:"password",placeholder:"Password",onChange:this.changeHandler,required:!0})),o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{type:"checkbox",className:"form-check-input",id:"rememberCheckBox",name:"remember"}),o.a.createElement("label",{className:"form-check-label",htmlFor:"rememberCheckBox"},"Remember me")),o.a.createElement("button",{type:"submit",onClick:this.submitHandler,className:"btn  mt-3"},"Submit"),o.a.createElement("button",{type:"reset",className:"btn ml-3 mt-3"},"Reset")))))}}]),t}(n.Component),C=Object(k.b)(null,r)(Object(S.a)(P)),F=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={password:"",cpassword:"",isPasswordMatched:!0},a.handleSubmit=function(e){var t=document.getElementById("register"),r=new FormData(t);a.props.signUp(r)},a.onPasswordChange=function(e){var t=e.target,r=t.value,n=t.name;a.setState(Object(f.a)({},n,r))},a.verifyPassword=function(e){var t,r,n=e.target,o=n.value,s=n.name;o===a.state.password?a.setState((t={},Object(f.a)(t,s,o),Object(f.a)(t,"isPasswordMatched",!0),t)):a.setState((r={},Object(f.a)(r,s,o),Object(f.a)(r,"isPasswordMatched",!1),r))},a}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.password,a=e.cpassword,r=e.isPasswordMatched,n=this.props.match.params.error;return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"jumbotron mt-5"},n&&o.a.createElement("div",{className:"alert-danger p-2 text-center",style:{marginTop:"-50px",marginBottom:"20px"}},o.a.createElement("strong",null,"Failed !! ")," to create account ",o.a.createElement("br",null),o.a.createElement("strong",null," Please try again !!!")),o.a.createElement("form",{onSubmit:function(e){return e.preventDefault()},id:"register",encType:"multipart/form-data",name:"register"},o.a.createElement("div",{className:"title"},o.a.createElement("h1",null,"Registration Form")),o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{className:"form-group col-md-6"},o.a.createElement("label",{htmlFor:"email"},"Email"),o.a.createElement("input",{type:"email",className:"form-control",id:"email",placeholder:"Email",name:"email",required:!0})),o.a.createElement("div",{className:"form-group col-md-6"},o.a.createElement("label",{htmlFor:"userName"},"User Name"),o.a.createElement("input",{type:"text",className:"form-control",id:"userName",placeholder:"User Name",name:"userName",required:!0}))),o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{className:"form-group col-md-6"},o.a.createElement("label",{htmlFor:"password"},"Password"),o.a.createElement("input",{type:"password",className:"form-control",id:"password",name:"password",value:t,placeholder:"Password",onChange:this.onPasswordChange,required:!0})),o.a.createElement("div",{className:"form-group col-md-6"},o.a.createElement("label",{htmlFor:"cpassword"}," Conform Password"),o.a.createElement("input",{type:"password",className:"form-control",id:"cpassword",value:a,name:"cpassword",onChange:this.verifyPassword,"aria-describedby":"pass",placeholder:"Conform Password",required:!0}),!r&&o.a.createElement("small",{id:"pass",className:"form-text text-danger"},"Password not Mathched"))),o.a.createElement("div",{className:"form-row"},o.a.createElement("div",{className:"form-group col-md-6"},o.a.createElement("label",{htmlFor:"firstName"},"First Name"),o.a.createElement("input",{type:"text",className:"form-control",id:"firstName",name:"firstName",required:!0})),o.a.createElement("div",{className:"form-group col-md-6"},o.a.createElement("label",{htmlFor:"lastName"},"Last Name"),o.a.createElement("input",{type:"text",className:"form-control",id:"lastName",name:"lastName",required:!0}))),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"address"},"Address"),o.a.createElement("input",{type:"text",className:"form-control",id:"address",name:"address",placeholder:"Kathmandu",required:!0})),o.a.createElement("button",{type:"submit",onClick:this.handleSubmit,className:"btn ",disabled:!r},"Register"),o.a.createElement("button",{type:"reset",className:"btn  ml-4"},"Reset"))))}}]),t}(n.Component),_=Object(k.b)(null,r)(F),I=(a(71),function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return console.log("this.props",this.props),o.a.createElement("div",null,o.a.createElement("div",{id:"landing"},"Landing"))}}]),t}(n.Component)),R=Object(k.b)(function(e){return{state:e}},r)(I),q=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return o.a.createElement(n.Fragment,null,o.a.createElement(p.a,null,o.a.createElement(h.a,{exact:!0,path:"/login/:error?",component:C}),o.a.createElement(h.a,{exact:!0,path:"/register/:error?",component:_}),o.a.createElement(h.a,{exact:!0,path:"/",component:R})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var T=a(75),D=a(13),B=a(34),L=Object(D.c)({getProfileReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_PROFILE":return t.payload||!1;default:return e}}});var M=function(){return Object(D.d)(L,{},Object(D.a)(B.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())}();c.a.render(o.a.createElement(k.a,{store:M},o.a.createElement(T.a,null,o.a.createElement(q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[35,2,1]]]);
//# sourceMappingURL=main.850bde72.chunk.js.map